\begin{tikzpicture}
  \ttfamily

  %---------------------------
  % Columna izquierda
  %---------------------------
  \etapaInicial{100}

  % 100 -> 101  (transición de alarmas)
  \etapa{101}{100}{Alarma\_MAQ\_X}
  \forzado{101}{X101-A1}{G10\{$*$\}}
  \otraAccion{X101-A1}{X101-A2}{Alarma\_cinta}


  \bifurcacionRetorno[15ex]{101}{101b}{101c}

  \etapa[1.25\nodeDist]{102}{101b}{Pieza\_Entregada};
\etapa[1.25\nodeDist]{103}{101c}{Pieza\_Entregada};
\etapa[1.25\nodeDist]{104}{102}{Pieza\_Entregada};

  % 101 -> 102 (bajada del lazo)
  %\etapa[1.35\nodeDist]{102}{101}{\underline{1}}
  %\forzado{102}{X102-A1}{G10\{INIT\}}
  %\otraAccion{X102-A1}{X102-A2}{Reiniciar\_Cinta}

  % 102 -> 104 (bajada final izquierda)
  %\concurrencia{102}{103}{TRANSICION}{104}

  

  %---------------------------
  % Columna derecha (etapa 103)
  %---------------------------
  % Colocamos 103 a la derecha de 102
  %\node[block, right of = X102, node distance = 9cm] (X103) {};
  %\node[below=0ex,anchor=south] at (X103) {103};
  %\forzado{103}{X103-A1}{G10\{\}}
  %\otraAccion{X103-A1}{X103-A2}{Reanudar\_cinta}

  %---------------------------
  % Lazo superior y retorno derecho
  %---------------------------
  % Ajuste del “rectángulo” superior: barra (101)→(103) con texto “Reset • Resume”
 %\setlength{\retornoDist}{0.75cm}
 % \setlength{\enlaceRetornoDist}{0.35\nodeDist}
 %\saltoHorizontal[9cm]{103}{104}{\makebox[0pt][c]{Reset $\bullet$ Resume}}
 \transicion{103}{104}{a}
  % Retorno vertical derecho (de 103 hacia 102) para cerrar el lazo
  %\retornoHorizontal{103}{104}{}

  %---------------------------
  % Retorno grande inferior hacia el inicio (104 → 100)
  %---------------------------
  \retornoInicio[4.2cm]{104}{100}{\underline{1}}

\end{tikzpicture}
