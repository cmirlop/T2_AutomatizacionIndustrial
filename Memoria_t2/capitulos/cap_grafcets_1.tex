\section{Grafcets}
\label{sec:introduccion}

\subsection{Grafcet Principal}
En la siguiente figura (\hyperref[graf:principal]{Grafcet Principal}), vemos el grafcet principal, el cual se encarga 
de poner la máquina en marcha, una vez no hay emergencia,funciona de manera que si modificamos 
el selector a modo manual, se va a activar el modo manual hasta que lo desactivemos, que entonces ahi,
si apretamos marcha, empezará la máquina con el grafcet de mantenimiento (REF), y poteriormente activará 
ya las primeras máquinas de cada objeto.

\begin{figure}[H]
	\centering
	\scalebox{0.75}{\input{./grafcets/0_Principal.tex}}
	\medskip
	\label{graf:principal}
	\caption{Grafcet Principal}
\end{figure}

% Grafcet principal
% Grafcet principal (todo a la izquierda)
\begin{comment}
	\begin{flushleft}
\(
\begin{aligned}
S0 &:= \mathrm{FirstScan} + (X3 * \mathrm{Paro\_Ciclo}) + (X4 * \overline{\mathrm{Modo\_Manual}}) \\
S1 &:= X0 * \bigl((\mathrm{Marcha} + \mathrm{HMI\_Marcha}) * \overline{\mathrm{Modo\_Manual}}\bigr) \\
S2 &:= (X1 * \mathrm{Mantenimiento\_Fin}) + (X3 * \overline{\mathrm{Paro\_Ciclo}}) \\
S3 &:= X2 * \mathrm{Pieza\_Empaquetada} \\
S4 &:= X0 * \mathrm{Modo\_Manual} \\
\\
X0 &:= S0 + X0 * (\overline{S1} * \overline{S4}) \\
X1 &:= S1 + X1 * \overline{S2} \\
X2 &:= S2 + X2 * \overline{S3} \\
X3 &:= S3 + X3 * (\overline{S0} * \overline{S2}) \\
X4 &:= S4 + X4 * \overline{S0} \\
\\
\mathrm{Act\_Mantenimiento} &:= X1 \\
\mathrm{Proceso\_Activo} &:= X2 + X3 \\
\mathrm{Modo\_Manual\_Activado} &:= X4
\end{aligned}
\)
\end{flushleft}
\end{comment}




\subsection{Grafcet Paro}
En la siguietne figura(\hyperref[graf:paro]{Grafcet Paro}) observamos el grafcet que trata el botón del paro, 
cuando apretamos este botón activamos una marca que recibe el grafcet principal para que se deje 
de emitir piezas y se queden las que están ya en la máquina.

\begin{figure}[H]
	\centering
	\scalebox{0.75}{\input{./grafcets/0P_Paro.tex}}
	\medskip
	\label{graf:paro}
	\caption{Grafcet del botón de Paro}
\end{figure}
