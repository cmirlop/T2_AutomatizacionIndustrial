\section{HMI}
\label{sec:introduccion}

\subsection{Modelo utilizado y conexión con el PLC}
Para la realización del proyecto se ha escogido un HMI TP1500 Comfort pro de 15" 
conectada via profinet al PLC, para poder tener acceso a las variables

\subsection{Pantalla principal}
En la siguiente figura .... podemos observar la pantalla principal, donde podemos observar distintos elementos.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{./Figuras/HMI1.png}
	\medskip
	\label{fig:maq2}
	\caption{Maquina 2 de la planta}
\end{figure}

Respecto a los botones tenemos:
\begin{itemize}
    \item Marcha : Este botón hace la misma función que el botón del panel
    físico del Factory IO, pone en marcha la máquina si esta no esta en alarmas
    o en emergencia.
    \item Paro: Al igual que la marcha, es un botón que esta duplicado Respecto
    al cuadro físico que se encarga de parar la producción de piezas.
    \item Rearme : Este botón solo se encuentra en el HMI, y lo que hace es
    que cuando está la máquina en alarma, si vemos que con mover un poco la pieza 
    la máquina puede seguir, apretaremos este botón sin necesidad de apretar el ''RESET''.
    \item Configuración : Para apretar este botón nos pedirá credenciales, ha este apartado solo 
    se puede acceder si tenemos permisos de administrador, donde nos da acceso a la pantalla que hablaremos 
    más adelante (ref).
    \item Alarma : Este bóton abre la pantalla del registro de alarmas que veremos más adelante (ref).
\end{itemize}

Aparte de los botones, en la parte superior derecha vemos que hay un contador de embalajes completados
que ya han acabado el proceso de producción.

En el centro de la pantalla vemos una foto de todo el proceso con luces en cada máquina 
que forman el proceso completo. Las luces tienen los siguientes estados:
\begin{itemize}
    \item Verde : Máquina libre y preparada para recibir piezas.
    \item Amarillo : Máquina funcionando en modo automático.
    \item Rojo : Máquina en alarma.
    \item Rojo parpadeante amarillo : Máquina en emergencia.
\end{itemize}
A parte de los colores, si apretamos sobre cualquier parte de la máquina nos llevara a una ventana
donde podremos ver sobre esa máquina que actuador esta en funcionamiento en ese momento, cual esta parado,
o el contador de piezas que ha descartado.



\subsection{Pantalla máquinas}
En la siguiente figura .... podemos ver como es una pantalla cuando sobre la principal pulsamos sobre una
máquina, vemos que podemos ver dos máquinas, unas luces encima de los actuadores que nos indican si
están funcionando o no, y un contador donde se puede ver el numero de piezas descartadas en esa máquina.

Vemos que también hay unos botones con los nombres de los actuadores, esto es porque si tenemos el modo
manual activado, estos botones se harán visibles y podremos accionar los actuadores desde aqui.



\subsection{Pantalla configuracion}
En la siguiente figura ... podemos ver la pantalla de configuración a la cual solo se puede acceder a través
de credenciales de administrador que hablaremos más adelante (ref). Vemos que hay una columna central donde
podemos ver:
\begin{itemize}
    \item Un campo de entrada, donde pondremos el número de vacunas por cajas que queremos
    \item Un botón que nos activa el mantenimiento, por si queremos comprobar que todo funciona
    \item Un botón que activa el vaciado de la máquina, por si en cualquier momento queremos vaciarla
    sin necesidad de la emergencia.
\end{itemize}

También disponemos de un botón de cerrar sesión, por si ya hemos configurado la máquina y probado, 
y ya el próximo que la toque es un trabajador normal.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{./Figuras/HMI3.png}
	\medskip
	\label{fig:maq2}
	\caption{Maquina 2 de la planta}
\end{figure}



\subsection{Usuarios}
Respecto a los usuarios, el HMI dispone de dos grupos:
\begin{itemize}
    \item Grupo administrador --> Acceso al modo manual, y al modo de configuración de la máquina
    \item Grupo Usuario --> Solo tiene acceso a ver el estado de la máquina, ponerla en marcha, pararla, reanudarla ,o acceder
    a los valores de los contadores de piezas
\end{itemize}


\subsection{Registro de alarmas}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{./Figuras/HMI_AL.png}
	\medskip
	\label{fig:maq2}
	\caption{Maquina 2 de la planta}
\end{figure}



