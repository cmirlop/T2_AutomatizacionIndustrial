


\subsection{Grafcet Máquina 1}



Como vemos en la siguiente figura (\hyperref[fig:maq1]{Máquina 1}), esta máquina está compuesta por:
\begin{itemize}
	\item 1 Cinta para Vacunas y Soportes, 2 Cintas para los embalajes.
	\item 1 Sensor de presencia al principio de la cinta, o al final de la segunda en los embalajes.
	\item 1 Sensor final de la cinta
	\item 1 Emisor de objetos.
\end{itemize}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{./Figuras/maq1.png}
	\medskip
	\label{fig:maq1}
	\caption{Máquina 1 de la planta}
\end{figure}

Con estos elementos conformamos el siguiente grafcet (\hyperref[graf:cinta_1]{Grafcet Máquina 1}), el cual su funcionamiento es 
generar un objeto enviarlo al final de la cinta, y si la siguiente máquina esta libre
entregárselo.





Las alarmas que tenemos en está máquina que la detendrían son:
\begin{itemize}
	\item Si cuando el objeto está de camino al sensor del final de la cinta, se pone otro objeto al principio de la cinta.
	\item Si el objeto desde que se ha generado hasta el final de la cinta tarda más de 8 segundos.
\end{itemize}


\begin{figure}[H]
	\centering
	\scalebox{0.75}{\input{./grafcets/1_Cinta1.tex}}
	\medskip
	\label{graf:cinta_1}
	\caption{Grafcet de la Máquina 1}
\end{figure}

Este grafcet está descompuesto en las siguientes ecuaciones algebráicas:\\


\setlength{\sepsGrups}{2ex}

% PRODUCCIÓN

% Transiciones
$S_{10}  = \mathtt{FirstScan} + X_{15}\cdot \mathtt{trig\_PR.Q}$\\
$S_{11}  = X_{10}\cdot \mathtt{Act\_Maquina}$\\
$S_{11b} = X_{11}\cdot \mathtt{S\_Pres}$\\
$S_{12}  = X_{11b}\cdot \Not{\mathtt{S\_Pres}}$\\
$S_{13}  = X_{12}\cdot \mathtt{S1}$\\
$S_{14}  = X_{13}\cdot \mathtt{Sig\_Maq\_Libre}$\\
$S_{15}  = X_{14}\cdot \Not{\mathtt{S1}}$\\[\sepsGrups]

% Etapas
$X_{10}  = S_{10}  + X_{10}\cdot \Not{S_{11}}$\\
$X_{11}  = S_{11}  + X_{11}\cdot \Not{S_{11b}}$\\
$X_{11b} = S_{11b} + X_{11b}\cdot \Not{S_{12}}$\\
$X_{12}  = S_{12}  + X_{12}\cdot \Not{(S_{13}+S_{14})}$\\
$X_{13}  = S_{13}  + X_{13}\cdot \Not{S_{14}}$\\
$X_{14}  = S_{14}  + X_{14}\cdot \Not{S_{15}}$\\
$X_{15}  = S_{15}  + X_{15}\cdot \Not{S_{10}}$\\[\sepsGrups]

% Marcas / salidas
$\mathtt{Maq\_Libre}     = X_{10}\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{Emisor\_2}      = \mathtt{Proceso\_Activo}\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{Emisor}         = \mathtt{Proceso\_Activo}\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{QC1A}           = (X_{11}+X_{11b}+\mathtt{Mantenimiento\_Cintas}+\mathtt{vaciado\_cinta}+\mathtt{man\_cintaA})\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{QC1B}           = (X_{11b}+X_{12}+X_{14}+\mathtt{Mantenimiento\_Cintas}+\mathtt{vaciado\_cinta}+\mathtt{man\_cintaB})\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{Act\_SIG\_MAQ}   = X_{14}\cdot \Not{\mathtt{STOP\_ACT}}$\\


\subsection{Grafcet Máquina 2}
Como vemos en la siguiente figura (\hyperref[fig:maq2]{Máquina 2}), esta máquina esta compuesta por:
\begin{itemize}
	\item 1 Tranfer, que puede desplazar hacia el lado, o ir recto.
	\item 1 Sensor de visión, o 3 sensores en la parte del embalaje.
\end{itemize}


\begin{figure}[H]
	\centering
	\includegraphics[width=0.3\linewidth]{./Figuras/maq2.png}
	\medskip
	\label{fig:maq2}
	\caption{Máquina 2 de la planta}
\end{figure}

Como vemos en el grafcet (\hyperref[graf:Identificador_Tipo]{Grafcet Máquina 2}), en esta máquina cuando nos entrega la pieza la máquina anterior, determinamos
3 caminos:
\begin{itemize}
	\item Determinamos si la pieza es del tipo A bueno, que nos esperamos a que 
	la siguiente máquina esté disponible.
	\item Determinamos si la pieza es del tipo A malo, que seguimos a la espera de
	que la siguiente máquina siga disponible, pero le avisaremos de que la pieza 
	que está de camino es mala .
	\item Determinamos si es del tipo B, que lo que hacemos es descartarla con
	un movimiento lateral del transfer.
\end{itemize}

Respecto a los 3 sensores en la máquina de embalaje, está hecho por la siguiente razón:
\begin{itemize}
	\item Si se detectan los 3 sensores al final del transfer, es el tipo A bueno.
	\item Si al final de la cinta sólo se detectan los dos sensores de abajo 
	es el tipo A malo.
	\item Si solo se detectan los dos sensores finales, que están uno encima del otro
	determinamos que es tipo B y se debe de descartar.
\end{itemize}

En esta máquina sólo se trata una alarma, que es que tardemos más de 5 segundos en recibir la pieza de la
máquina anterior.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{./Figuras/grafcet_20.png}
	\medskip
	\label{graf:Identificador_Tipo}
	\caption{Grafcet de la Máquina 2}
\end{figure}

Este grafcet está descompuesto en las siguientes ecuaciones algebráicas:\\

\setlength{\sepsGrups}{2ex}

% PRODUCCIÓN

% Transiciones (sin FORCE_CURRENT)
$S_{20} = \mathtt{FirstScan} + X_{22b}\cdot \Not{\mathtt{SA\_Bueno}} + X_{23b}\cdot \Not{\mathtt{SA\_Malo}} + X_{24}\cdot \mathtt{T1.Q}$\\
$S_{21} = X_{20}\cdot \mathtt{Act\_Proceso}$\\
$S_{22} = X_{21}\cdot \mathtt{SA\_Bueno}$\\
$S_{22b} = X_{22}\cdot \mathtt{SigMaqLibre}$\\
$S_{23} = X_{21}\cdot \mathtt{SA\_Malo}\cdot \Not{\mathtt{SA\_Bueno}}$\\
$S_{23b} = X_{23}\cdot \mathtt{SigMaqLibre}$\\
$S_{24} = X_{21}\cdot \mathtt{SB}$\\[\sepsGrups]

% Etapas (sin FORCE_INIT)
$X_{20}  = S_{20}  + X_{20}\cdot \Not{S_{21}}$\\
$X_{21}  = S_{21}  + X_{21}\cdot \Not{(S_{22}+S_{23}+S_{24})}$\\
$X_{22}  = S_{22}  + X_{22}\cdot \Not{S_{22b}}$\\
$X_{22b} = S_{22b} + X_{22b}\cdot \Not{S_{20}}$\\
$X_{23}  = S_{23}  + X_{23}\cdot \Not{S_{23b}}$\\
$X_{23b} = S_{23b} + X_{23b}\cdot \Not{S_{20}}$\\
$X_{24}  = S_{24}  + X_{24}\cdot \Not{S_{20}}$\\[\sepsGrups]

% Marcas / salidas
$\mathtt{Maq\_Libre}          = X_{20}\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{QC2}                = (X_{21}+X_{22b}+X_{23b}+\mathtt{Mantenimiento\_Cintas}+\mathtt{vaciado\_cinta}+\mathtt{Man\_Cinta})\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{QTRANS}             = (X_{24}+\mathtt{Mantenimiento\_Transfes}+\mathtt{vaciado\_Trans}+\mathtt{Man\_Trans})\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{Act\_SIG\_MAQ\_Buena}= X_{22b}\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{Act\_SIG\_MAQ\_Mala} = X_{23b}\cdot \Not{\mathtt{STOP\_ACT}}$\\
$\mathtt{Pieza\_Rec}         = (X_{22}+X_{23}+X_{24})\cdot \Not{\mathtt{STOP\_ACT}}$\\[\sepsGrups]

% Tipos
$\mathtt{TipoAbuena} = X_{22b}$\\
$\mathtt{TipoAMala}  = X_{23b}$\\
$\mathtt{TipoB}      = X_{24}$\\
